# 과목 Ⅰ. 데이터 모델링의 이해
## 제 1장. 데이터 모델링의 이해
---
---
## 제 1절. 데이터 모델링의 이해
---

### 1. 데이터모델링이란?
 - 정보시스템을 구축하기 위한 데이터 관점의 업무 분석 기법
 - 현실세계의 데이터(what)에 대해 약속된 표기법에 의해 표현하는 과정
 - 데이터베이스를 구축하기 위한 분석/설계의 과정

---

### 2. 모델링의 특징
 1) <span style ="color:red">추상화</span> : 현실세계를 일정한 형식에 맞추어 표현함
 2) <span style ="color:red">업무분석 및 업무형상화</span> : 단지 <u>시스템 구현만을 위해 수행하는 타스크가 아니며,</u> 시스템 구현을 포함한 업무분석 및 업무 형상화를 하려는 목적
 3. <span style ="color:red">단순화</span> : 복잡한 현실을 제한된 언어나 표기법을 통해 이해하기 쉽게함
 4. <span style ="color:red">복잡화</span> : 애매모호함을 배제하고 누구나 이해가 가능하도록 정확하게 현상을 기술함
---

### 3. 데이터 모델링이 필요한 이유
 1) 업무정보를 구성하는 기초가 되는 정보들에 대해 <u>일정한 표기법에 의해 표현함</u>으로써 → 정보시스템 구축의 대상이 되는 <span style ="color:red">업무 내용을 정확하게 분석 </span> 
 2) 분석된 모델을 가지고 <u>실제 데이터베이스를 생성</u>하여 →  <span style ="color:red">개발 및 데이터관리에 사용</span> 
 3) <span style ="color:red">데이터 모델링 자체로서 업무를 설명하고 분석</span> 하는 부분에서도 매우 중요한 의미를 가짐   
  (단지 데이터베이스만을 구축하기 위한 용도로 쓰이는 것이 아님)
---

### 4. 데이터 모델링을 할 때 유의할 사항
 1. **<span style ="color:red">중복성(Duplication)</span>**
     - 데이터 모델은 같은 데이터를 사용하는 사람, 시간, 그리고 장소를 파악하는데 도움을 줌으로써 **데이터베이스가 여러 장소에 같은 정보를 저장하는 잘못을 하지 않도록 한다.**

 2. **<span style ="color:red">비유연성(Inflexibility)</span>**
     - 데이터 모델을 어떻게 설계했느냐에 따라 사소한 업무변화에도 데이터 모델이 수시로 변경됨으로써 유지보수의 어려움을 가중시킬 수 있다.

     - **데이터의 정의를 데이터의 사용 프로세스와 분리함**으로써 데이터 모델링은 데이터 혹은 프로세스의 작은 변화가 애플리케이션과 데이터베이스에 중대한 변화를 일으킬 수 있는 가능성을 줄인다.
 3. **<span style ="color:red">비일관성(Inconsistency)</span>**
     - 데이터의 중복이 없더라도 비일관성은 발생할 수 있는데, 예를 들면 신용 상태에 대한 갱신 없이 고객의 납부 이력 정보를 갱신하는 경우이다. 
     - 개발자가 서로 연관된 다른 데이터와 모순된다는 고려 없이 일련의 데이터를 수정할 수 있기 때문에 이와 같은 문제가 발생할 수 있다. 
     - 데이터 모델링을 할 때 **데이터와 데이터 간의 상호 연관 관계에 대해 명확하게 정의**한다면 이러한 위험을 사전에 예방하는데 도움을 줄 수 있다.

     - <span style ="color:blue">사용자가 처리하는 프로세스 혹은 이와 관련된 프로그램과 테이블의 연계성을 높이는 것은 데이터 모델이 업무 변경에 대해 취약하게 만드는 단점에 해당한다.</span>
---

### 5. 데이터모델링의 개념 
 1) **개념적** 데이터 모델링
     - 전사적 데이터 모델링이나 EA 수립시에 많이 하며, <u>추상화 수준이 높고 업무 중심적이고 포괄적인 수준의 모델링</u>을 진행하는 것

 2) **논리적** 데이터 모델링
     - 시스템으로 구축하고자 하는 업무에 대해 <u>Key, 속성, 관계 등을 정확하게 표현하고, 재사용성이 높음</u>

 3) **물리적** 데이터 모델링
     - 실제로 데이터베이스에 이식할 수 있도록 <u>성능, 저장 등의 물리적인 성격을 고려</u>한 데이터모델링 방식

---

### 6. 데이터베이스 스키마 구조 3단계
 - 외부스키마 (External Schema)
 - 개념스키마 (Conceptual Schema)
     - <u>모든 사용자 관점을 통합한 조직 전체 관점의 통합적 표현</u>
     - 모든 응용시스템들이나 사용자들이 필요로 하는 데이터를 통합한 조직 전체의 DB를 기술한 것으로 DB에 저장되는 데이터와 그들 간의 관계를 표현하는 스키마
     - 데이터 모델링은 통합관점의 뷰를 가지고 있는 개념 스키마를 만들어가는 과정으로 이해할 수 있음
 - 내부스키마 (Internal Schema)
---
---

## 제 2절. 엔터티
---

### 1. ERD 작성 순서
 1) 엔터티를 그린다.
 2) 엔터티를 적절하게 **배치**한다.
 3) **엔터티간 관계**를 설정한다.
 4) **관계명**을 기술한다.
 5) 관계의 **참여도**를 기술한다.
 6) 관계의 **필수여부**를 기술한다.

---

### 2. ERD란?
 - 1976년 피터첸에 의해 Entity-Relationship Model(E-R Model)이라는 표기법이 만들어졌다.
 - 일반적으로 ERD를 작성하는 방법은 엔터티 도출 → 엔터티 배치 → 관계 설정 → 관계명 기술의 흐름으로 작업을 진행한다.
 - 관계의 명칭은 관계 표현에 있어서 매우 중요한 부분에 해당한다.

```
엔터티를 어디에 배치하는가에 대한 문제는 필수사항은 아니지만 데이터 모델링 툴 사용 여부와 상관없이 데이터 모델의 가독성 측면에서 중요한 문제이다.
일반적으로 사람의 눈은 왼쪽에서 오른쪽, 위쪽에서 아래쪽으로 이동하는 경향이 있기 때문에, 데이터 모델링에서도 가장 중요한 엔터티를 왼쪽 상단에 배치하고, 이것을 중심으로 다른 엔터티를 나열하면서 전개하면 사람의 눈이 따라가기에 편리한 데이터 모델을 작성할 수 있다.
해당 업무에서 가장 중요한 엔터티는 왼쪽 상단에서 조금 아래쪽 중앙에 배치하여 전체 엔터티와 어울릴 수 있도록 하면 향후 관련 엔터티와 관계선을 연결할 때 선이 꼬이지 않고 효과적으로 배치할 수 있게 된다.
```
---

### 3. 발생시점에 따른 엔터티 분류
 - **<span style ="color:red">기본/키엔터티 (Fundamental Entity, Key Entity) </span>**
     - **그 업무에 원래 존재하는 정보**
     - 다른 엔터티와의 관계에 의해 생성되지 않고 독립적으로 생성이 가능하고 자신은 타 엔터티의 <u>부모의 역할</u>
     - 다른 엔터티로부터 주식별자를 상속받지 않고, 자신의 <u>고유한 주식별자</u>를 가짐
     - 예) 사원, 부서, 고객, 상품, 자재 등
 - **<span style ="color:red">중심엔터티 (Main Entity)</span>**
     - **기본엔터티로부터 발생**
     - 업무에서 **중심적인 역할**을 함
     - 데이터의 양이 많이 발생되고 다른 엔터티와의 관계를 통해 많은 행위 엔터티를 생성함
     - 예) 계약, 사고, 예금원장, 청구, 주문, 매출 등
 - **<span style ="color:red">행위엔터티 (Active Entity)</span>**
     - **두 개 이상이 부모엔터티로부터 발생**되고 <u>자주 내용이 바뀌거나 데이터량이 증가됨</u>
     - 분석초기 단계에서는 잘 나타나지 않으며, 상세 설계단계나 프로세스와 상관 모델링을 진행하면서 도출될 수 있음
     - 예) 주문목록, 사원변경이력 등
---

### 4. 엔터티의 특징
 1) 반드시 해당 업무에서 필요하고 관리하고자 하는 정보여야 한다. (예. 환자, 토익의 응시횟수, ...)
 2) <u>유일한 식별자에 의해 식별이 가능</u>해야 한다.
 3) 영속적으로 존재하는 <u>인스턴스의 집합</u>이어야 한다.('한 개'가 아니라 '두 개 이상')
 4) 엔터티는 <u>업무 프로세스에 의해 이용</u>되어야 한다.
 5) 엔터티는 반드시 <u>속성</u>이 있어야 한다.
 6) 엔터티는 다른 엔터티와 <u>최소 한 개 이상의 관계</u>가 있어야 한다.
     - 그러나 공통코드, 통계성 엔터티의 경우는 관계를 생략 할 수 있다.

---

### 5. 엔터티를 명명하는 일반적인 기준
 1) 현업업무에서 사용하는 용어를 사용
 2) 가능하면 약어를 사용하지 않음
 3) 단수명사를 사용
 4) 모든 엔터티를 통틀어서 유일하게 이름이 부여되어야 함
 5) 엔터티 생성 의미대로 이름을 부여함

---
---

## 제 3절. 속성
---

### 1. 속성(ATTRIBUTE)이란?
 - 업무에서 필요로 하는 인스턴스에서 관리하고자 하는 의미상 **<span style ="color:red">더 이상 분리되지 않는 최소의 데이터 단위</span>**
 - 엔터티에 대한 자세하고 구체적인 정보를 나타냄
 - 속성도 집합임
---

### 2. 엔터티, 인스턴스, 속성, 속성값의 관계
 - 한 개의 엔터티는 <u>두 개 이상의 인스턴스의 집합</u>이어야 한다.
 - 한 개의 엔터티는 <u>두개 이상의 속성</u>을 갖는다.
 - 한 개 의 속성은 <u>한 개 이상의 속성값</u>을 갖는다.
---

### 3. 속성의 특성에 따른 분류
 - **<span style ="color:red">기본</span>** 속성
     - 업무로부터 추출한 모든 속성
     - <u>가장 일반적이고 많은 속성을 차지함</u>
     - 예) 제품이름, 제조년월, 제조원가 등

 - **<span style ="color:red">설계</span>** 속성
     - 업무상 필요한 데이터 외에 데이터 모델링을 위해 업무를 규칙화하기 위해 속성을 <u>새로 만들거나 변형하여 정의하는 속성</u>
     - 예) 코드성 속성, 일련번호 등

 - **<span style ="color:red">파생</span>** 속성
     - 다른 속성에 영향을 받아 발생하는 속성
     - 데이터를 조회할 때 빠른 성능을 낼 수 있도록 하기 위해 <u>원래 속성의 값을 계산하여 저장할 수 있도록 만든 속성</u>
     - 다른 속성에 영향을 받으므로, 영향받는 속성을 알아두어야 하는 등 유의할 점이 많아서 <u>가급적 적게 정의하는 것이 좋음 (데이터의 정합성 유의)</u>
     - 예) 전체 용기 수, 용기의 총 금액 등
---

### 4. 도메인(Domain)
 - 각 속성은 가질 수 있는 값의 범위가 있는데 이를 그 속성의 도메인이라고 함
 - 엔터티 내에서 속성에 대한 데이터타입과 크기, 그리고 제약사항을 지정하는 것

```
<도메인의 예시>
주문이라는 엔터티가 있을 때 단가라는 속성 값의 범위는 100에서 10,000 사이의 실수 값이며, 제품명이라는 속성은 길이가 20자리 이내의 문자열로 정의할 수 있다.
```
---

### 5. 속성의 명칭 부여
 - 해당 업무에서 사용하는 이름을 부여
 - 서술식 속성명은 사용하지 않음
 - 약어사용은 가급적 제한함
 - 전체 데이터모델에서 유일성을 확보하는 것이 좋음
     - 속성의 명칭은 애매모호하지 않게, 복합 명사를 사용하여 구체적으로 명명함으로써 전체 데이터모델에서 <u>유일성을 확보하는 것이 반정규화, 통합 등의 작업을 할 때 혼란을 방지할 수 있는 방법이 됨</u>
---
---

## 제 4절. 관계
---

### 1. 데이터모델링의 관계
 - 관계는 **존재에 의한 관계**와 **행위에 의한 관계**로 구분될 수 있으나 ERD에서는 관계를 연결할 때, 존재와 행위를 구분하지 않고, 단일화된 표기법을 사용함
 - UML(Unified Modeling Language)에는 클래스다이어그램의 관계 중 <span style ="color:green">연관관계(Association)</span>와 <span style ="color:blue">의존관계(Dependency)</span>가 있고 이것은 <span style ="color:green">실선</span>와과 <span style ="color:blue">점선</span>와의 표기법으로 다르게 표현됨
---

### 2. 관계의 표기법
 1) 관계명(Membership) : 관계의 이름
 2) 관계차수(Cardinality) : 1:1, 1:M, M:N
 3) 관계 선택사양(Optionality) : 필수관계, 선택관계

---

### 3. 두 개의 엔터티 사이에 정의한 관계를 체크하는 사항
 1) 두 개의 엔터티 사이에 관심 있는 <u>연관규칙이 존재</u>하는가?
 2) 두 개의 엔터티 사이에 <u>정보의 조합이 발생</u>되는가?
 3) 업무기술서, 장표에 관계연결을 가능하게 하는 <u>**동사(Verb)**</u>가 있는가?
     - 동사는 관계를 서술하는 업무기술서의 가장 중요한 사항!
 4) 업무기술서, 장표에 <u>관계연결에 대한 규칙이 서술</u>되어 있는가?

---

### 4. 관계 읽기
- 기준(Source) 엔터티를 한 개(One) 또는 각(Each)로 읽는다.
- 대상(Target) 엔터티의 관계참여도, 즉 개수(하나, 하나 이상)를 읽는다.
- 관계선택사양과 관계명을 읽는다.
---
---

## 제 5절. 식별자
---

### 1. 식별자의 종류
- 엔터티 내에서 <u>대표성을 가지는가</u>에 따라 **<span style ="color:red">주식별자(Primary Identifier)와 보조식별자(Alternate Identifier)</span>** 로 구분
- 엔터티 내에서 <u>스스로 생성되었는지 여부</u>에 따라 **<span style ="color:red">내부식별자(Internal Identifier)와 외부식별자(Foreign Identifier)</span>** 로 구분
- <u>단일 속성으로 식별이 되는가</u>에 따라 **<span style ="color:red">단일식별자(Single Identifier)와 복합식별자(Composit Identifier)</span>** 로 구분
- 원레 업무적으로 의미가 있던 식별자 속성을 대체하여 일련번호와 같이 <u>새롭게 만든 식별자를 구분</u>하기 위해 **<span style ="color:red">본질식별자(Original Identifier)와 인조식별자(Surrogate Identifier)</span>** 로 구분
---

### 2. 식별자의 분류체계
|분류|식별자|설명|
|------|---|---|
|대표성 여부|주식별자|엔터티 내에서 각 어커런스를 구분할 수 있는 구분자이며, 타 엔터티와 참조관계를 연결할 수 있는 식별자|
||보조식별자|엔터티 내에서 각 어커런스를 구분할 수 있는 구분자이나, 대표성을 가지지 못해 참조관계 연결을 못함|
|스스로 생성여부|내부식별자|엔터티 내부에서 스스로 만들어지는 식별자|
||외부식별자|타 엔터티와의 관계를 통해 타 엔터티로부터 받아오는 식별자|
|속성의 수|단일식별자|하나의 속성으로 구성된 식별자|
||복합식별자|둘 이상의 속성으로 구성된 식별자|
|대체 여부|본질식별자|업무에 의해 만들어지는 식별자|
||인조식별자|업무적으로 만들어지지는 않지만 원조식별자가 복잡한 구성을 가지고 있기 때문에 인위적으로 만든 식별자|

---

### 3. 주식별자를 지정할 때 고려해야 할 사항
 - 주식별자에 의해 엔터티내에 **모든 인스턴스들이 유일하게 구분**되어야 한다.
 - 주식별자를 구성하는 속성의 수는 **유일성을 만족하는 최소의 수**가 되어야 한다.
 - 지정된 주식별자의 값은 **자주 변하지 않는 것**이어야 한다.
 - 주식별자가 지정이 되면 **반드시 값이 들어와야 한다.**
---

### 4. 주식별자의 특징
 - **유일성** : 주식별자에 의해 엔터티내에 모든 인스턴스들을 <u>유일하게 구분함</u>
 - **최소성** : 주식별자를 구성하는 속성의 수는 <u>유일성을 만족하는 최소의 수</u>가 되어야 함
 - **불변성** : 주식별자가 한 번 특정 엔터티에 지정되면 <u>그 식별자의 값은 변하지 않아야 함</u>
 - **존재성** : 주식별자가 지정되면 <u>반드시 데이터 값이 존재 (Null 안됨)</u>
---

### 5. 주식별자를 도출하기 위한 기준
 - 해당 업무에서 자주 이용되는 속성을 주식별자로 지정
 - 명칭, 내역 등과 같이 이름으로 기술되는 것들은 가능하면 주식별자로 지정하지 않음
 - 복합으로 주식별자로 구성할 경우 너무 많은 속성이 포함되지 않도록 함
 - 자주 수정되는 속성이 주식별자가 되면 자식 엔터티에 대한 연쇄 수정이 필요하여 시스템 상에 부하의 원인이 될 수 있기 때문에 주식별자로서 적합하지 않음
---

### 6. 식별자와 비식별자관계 비교

|항목|식별자관계|비식별자관계|
|------|---|---|
|목적|강한 연결관계 표현|약한 연결관계 표현|
|자식 주식별자 영향|자식 주식별자의 구성에 포함됨|자식 일반 속성에 포함됨|
|표기법|실선 표현|점선 표현|
|연결 고려사항|반드시 부모 엔터티 종속|약한 종속관계|
||자식 주식별자구성에 부모 주식별자포함 필요|자식 주식별자구성을 독립적으로 구성|
||상속받은 주식별자속성을 타엔터티에 이전 필요|자식 주식별자구성에 부모주식별자 부분 필요|
|||상속받은 주식별자속성을 타 엔터티에 차단 필요|
|||부모쪽의 관계참여가 선택관계|

---

### 7. 비식별자 관계로 연결하는 것을 고려해야 하는 경우
 - 부모엔터티에 참조값이 없어도 자식엔터티의 인스턴스가 생성될 수 있는 경우
 - 여러 개의 엔터티를 하나로 통합하면서 각각의 엔터티가 갖고 있던 여러 개의 개별 관계가 통합되는 경우
 - 자식 쪽 엔터티의 주식별자를 부모엔터티와는 별도로 생성하는 것이 더 유리하다고 판단하는 경우
 - 부모엔터티의 인스턴스가 자식의 엔터티와 관계를 가지고 있었지만 자식만 남겨두고 먼저 소멸될 수 있는 경우 (엔터티별로 데이터의 생명주기를 다르게 관리할 경우)

---