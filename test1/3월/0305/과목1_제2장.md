# 과목 Ⅰ. 데이터 모델링의 이해
## 제 2장. 데이터 모델과 성능
---
---
## 제 1절. 성능 데이터 모델링의 개요
---

### 1. 성능 데이터 모델링이란?
 - **데이터베이스 성능향상**을 목적으로 설계단계의 데이터모델링 때부터 성능과 관련된 사항이 데이터모델링에 반영될 수 있도록 하는 것
---

### 2. 성능 데이터모델링의 특징
 - <u>데이터의 증가가 빠를수록</u> 성능저하에 따른 성능개선비용은 증가
 - 데이터모델은 <u>성능을 튜닝하면서 변경이 될 수 있음</u>
 - <u>분석/설계 단계에서</u> 성능을 고려한 데이터모델링을 수행할 경우 성능저하에 따른 Rework비용을 최소할 할 수 있음
---

### 3. (데이터모델링단계에서 성능을 충분히 고려하기 위한) **성능데이터모델링 수행절차**

 1) 데이터모델링을 할 때 <span style ="color:red">정규화</span>를 정확하게 수행한다.
 2) 데이터베이스 <span style ="color:red">용량산정</span>을 수행한다.
 3) 데이터베이스에 발생되는 <span style ="color:red">트랜잭션의 유형</span>을 파악한다.
 4) 용량과 트랜잭션의 유형에 따라 <span style ="color:red">반정규화(역정규화)</span>를 수행한다.
 5) <span style ="color:red">이력모델의 조정, PK/FK 조정, 슈퍼타입/서브타입 조정</span> 등을 수행한다.
 6) <span style ="color:red">성능관점</span>에서 데이터모델을 검증한다.

```
성능을 고려한 데이터모델링은 ①정규화를 수행한 이후에 ②용량산정과 ③트랜잭션 유형을 파악하여 ④반정규화를 수행한다.
또한 ⑤PK/FK 등을 조정하여 인덱스의 특징을 반영한 데이터모델로 만들고, ⑥이후에 데이터 모델을 검증하는 방법으로 전개한다.
```
---

### 4. 성능데이터 모델링을 할 때 고려사항
 - **정규화**는 기본적으로 <u>중복된 데이터를 제거함으로써 조회성능을 향상</u>시킬 수 있음
 - **용량산정**은 전체적인 데이터베이스에 발생되는 <u>트랜잭션의 유형과 양을 분석하는 자료</u>가 되므로 성능데이터모델링을 할 때 중요한 작업이 될 수 있음
 - 물리적인 데이터모델링을 할 때 **PK/FK의 칼럼의 순서조정, FK 인덱스 생성 등**은 성능 향상을 위한 데이터 모델링 작업에 중요한 요소가 됨
 - **이력데이터**는 시간에 따라 반복적으로 발생이 되기 때문에 <u>대량 데이터일 가능성이 높아 특별히 성능을 고려</u>하여 칼럼 등을 추가하도록 설계해야 함
---
---
## 제 2절. 정규화와 성능
---

### 1. 정규화란?
 - **데이터베이스의 설계를 재구성하는 테크닉**
     - 불필요한 데이터 제거
     - 삽입/갱신/삭제 시 발생할 수 있는 각종 이상현상들을 방지
     - "논리적"으로 데이터를 저장 → 데이터 테이블의 구성이 논리적이고 직관적
---

### 2. 1차/2차/3차 정규화

 - **1차 정규화**
     - <span style ="color:red">테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록</span> 테이블을 분해하는 것
     - 같은 성격과 내용의 컬럼이 연속적으로 나타나는 컬럼이 존재할 때, 해당 컬럼을 제거하고 <u>기존의 테이블과 1:N 관계를 형성하는 것</u>
     - 중복속성에 대한 분리가 1차 정규화의 대상이 되며, <span style ="color:blue">로우단위의 중복</span> 도 1차 정규화의 대상이 되지만, <span style ="color:blue">컬럼단위로 중복</span>이 되는 경우도 1차 정규화의 대상이다

 - **2차 정규화**
     - 제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것 
         - 완전 함수 종속 : <u>기본키의 부분집합이 결정자가 되어선 안된다</u>는 것을 의미
     - 즉, <span style ="color:red">기본키중에 특정 컬럼에만 종속된 컬럼이 없어야 된다</span> 는 것

 - **3차 정규화**
     - 제2 정규화를 진행한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것
         - 이행적 종속 : A → B, B → C가 성립할 때 A → 가 성립되는 것을 의미
     - 즉,  <span style ="color:red">기본키 이외에 다른 컬럼이 그 외의 다른 컬럼을 결정할 수 없다</span>는 것
---
---

## 제 3절. 반정규화와 성능
---

### 1. 반정규화란?
 - 정규화된 엔터티, 속성, 관계에 대해 <u>시스템의 성능향상과 개발(Development)과 운영(Maintenance)의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법</u>을 의미
 - 반정규화는 <u>데이터를 중복하여 성능을 향상시키기 위한 기법</u>이라고 정의할 수 있고,
 - 좀 더 넓은 의미의 반정규화는 **성능을 향상시키기 위해 정규화된 데이터 모델에서 중복, 통합, 분리 등을 수행하는 모든 과정**을 의미함
 
 ```
 데이터 무결성이 깨질 수 있는 위험을 무릅쓰고 데이터를 중복하여 반정규화를 적용하는 이유

     - 데이터를 조회할 때 디스크 I/O량이 많아서 성능이 저하되거나 
     - 경로가 너무 멀어 조인으로 인한 성능저하가 예상되거나 
     - 칼럼을 계산하여 읽을 때 성능이 저하될 것이 예상되는 경우 반정규화를 수행하게 됨
 ```
---

### 2. 테이블의 반정규화

|기법분류|반정규화 기법|
|------|---|
|테이블 병합|1:1 관계 테이블병합|
||1:M 관계 테이블병합|
||슈퍼/서브타입 테이블 병합|
|테이블 분할|수직 분할|
||수평 분할|
|테이블 추가|중복테이블 추가|
||통계테이블 추가|
||이력테이블 추가|
||부분테이블 추가|

---

### 3. 칼럼의 반정규화

|반정규화 기법|
|------|
|중복칼럼 추가|
|파생칼럼 추가|
|이력테이블 칼럼 추가|
|PK에 의한 칼럼 추가|
|응용시스템 오작동을 위한 칼럼 추가|

- 중복칼럼 추가 : 조인감소를 위해 여러 테이블에 동일한 칼럼을 갖도록 함
- 파생칼럼 추가 : 조회 성능을 우수하게 하기 위해 미리 계산된 칼럼을 갖도록 함
- 이력테이블에 기능 칼럼을 추가 : 최신값을 처리하는 이력의 특성을 고려하여 기능성 칼럼을 추가

---

### 4. 반정규화 절차
 1) 반정규화 대상조사
     - 범위처리빈도수 조사
     - 대량의 범위 처리 조사
     - 통계성 프로세스 조사
     - 테이블 조인 개수

 2) 다른 방법유도 검토
     - 뷰(VIEW) 테이블
     - 클러스터링 적용
     - 인덱스의 조정
     - 응용애플리케이션

 3) 반정규화 적용
     - 테이블 반정규화
     - 속성의 반정규화
     - 관계의 반정규화

---

### 5. 반정규화의 대상에 대해 다른 방법으로 처리
 - 지나치게 *많은 조인(JOIN)* 이 걸려 데이터를 조회하는 작업이 기술적으로 어려울 경우 **뷰(VIEW)를 사용**하면 이를 해결할 수도 있다.
 - *대량의 데이터처리나 부분처리*에 의해 성능이 저하되는 경우에 **클러스터링을 적용하거나 인덱스를 조정함**으로써 성능을 향상시킬 수 있다.
 - *대량의 데이터*는 Primary Key의 성격에 따라 부분적인 테이블로 분리할 수 있다. 즉, **파티셔닝 기법(Partitioning)**이 적용되어 성능저하를 방지할 수 있다.
 - **응용 애플리케이션에서 로직을 구사하는 방법을 변경함**으로써 성능을 향상 시킬 수 있다.
---
---
## 제 4절. 대량 데이터에 따른 성능
---

### 1. 파티셔닝 기법(Partitioning)이란?
 - <u>하나의 테이블에 많은 양의 데이터가 저장되면</u> 인덱스를 추가하고 테이블을 몇 개로 쪼개도 성능이 저하되는 경우가 있음
 - 이 때 <u>논리적으로는 하나의 테이블이지만 물리적으로는 여러 개의 테이블로 분리</u>하여 **데이터 엑세스 성능도 향상시키고, 데이터 관리방법도 개선**할 수 있도록 테이블에 적용하는 기법 
---

### 슈퍼/서브 타입 데이터모델의 변환기술
 - 개별로 발생되는 트랜잭션에 대해서는 **개별 테이블**로 구성
 - 슈퍼타입 + 서브타입에 대해 발생되는 트랜잭션에 대해서는 **슈퍼타입 + 서브타입 테이블**로 구성
 - 전체를 하나로 묶어 트랜잭션이 발생할 때는 **하나의 테이블**로 구성 

---
---
## 제 5절. 데이터베이스의 구조와 성능
---

### 1. PK 순서를 결정하는 기준
 - 인덱스 정렬구조를 이해한 상태에서 인덱스를 효율적으로 이용할 수 있도록 PK 순서를 지정해야 함
 - 즉 인덱스의 특징은 여러 개의 속성이 하나의 인덱스로 구성되어 있을 때, 앞쪽에 위치한 속성의 값이 비교자로 있어야 인덱스가 좋은 효율을 나타낼 수 있음
 - 앞쪽에 위치한 속성 값이 가급적 '=' 아니면 최소한 범위 'BETWEEN', '<>'가 들어와야 인덱스를 이용할 수 있음

---
---
## 제 6절. 분산 데이터베이스와 성능
---

### 1. 분산 데이터베이스의 장점
 - 지역 자치성, 점증적 시스템 용량 확장
 - 신뢰성과 가용성
 - 효용성과 융통성
 - 빠른 응답 속도와 통신비용 절감
 - 데이터의 가용성과 신뢰성 증가
 - 시스템 규모의 적절한 조절
 - 각 지역 사용자의 요구 수용 증대
---

### 2. 분산 데이터베이스의 단점
 - 소프트웨어 개발 비용
 - 오류의 잠재성 증대
 - 처리 비용의 증대
 - 설계, 관리의 복잡성과 비용
 - 불규칙한 응답 속도
 - 통제의 어려움
 - 데이터 무결성에 대한 위협

